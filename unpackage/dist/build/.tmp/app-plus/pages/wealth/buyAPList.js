(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/wealth/buyAPList","components/uni-icon/uni-icon"],{"0691":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"28b6":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(n("857b"));var i=o(n("ab50")),a=n("5cc9"),r=n("1bfa");function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){return n.e("components/uni-segmented-control2/uni-segmented-control").then(n.bind(null,"a72c"))},s=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"4a0a"))},f={data:function(){return{items:[{name:"待匹配",type:"match",num:0},{name:"待付款",type:"pay",num:0},{name:"待确认",type:"confirm",num:0},{name:"待评价",type:"evaluate",num:0}],current:0,list:[],showOrHide:!1,txtShowOrHide:!0,url:"",imageFile:null,proof:!0,sucs:!1,flag:!0,gif:!1,inputShow:!0}},onNavigationBarButtonTap:function(e){t.navigateTo({url:"buyRecord"})},components:{uniSegmentedControl:u,uniLoadMore:s},onShow:function(){this.info("match"),this.info("pay"),this.info("confirm"),this.info("evaluate"),0==this.current?this.getList("match"):1==this.current?this.getList("pay"):2==this.current?this.getList("confirm"):3==this.current&&this.getList("evaluate")},methods:{navTo:function(e){t.navigateTo({url:e.currentTarget.dataset.url})},showOrHid:function(t){this.id=t,this.showOrHide=!this.showOrHide},cal:function(){this.showOrHide=!this.showOrHide,this.proof=!0,this.sucs=!1,this.flag=!0,this.gif=!1,that.inputShow=!0,this.$refs.files.value=null},chooseImg:function(){var e=this,n=this;t.chooseImage({sizeType:["original","compressed"],sourceType:["album"],count:1,success:function(i){e.url=i.tempFilePaths[0];var o=e;n.gif=!0,n.inputShow=!1,n.proof=!1,(0,r.djPostForm)({url:"/api/uploads",filePath:o.url,fileType:"image",name:"files",success:function(e){var i=JSON.parse(e.data);200==i.status?(n.gif=!1,n.sucs=!0,o.url=a.config.BASE_URL+i.data.filePath+i.data.fileName,o.imageFile=i.data):t.showToast({title:i.data.message,icon:"none"})}})}})},submit:function(){var t=this;if(i.default.isNotNull(t.url,"收款码图片")&&t.flag){var e=t.imageFile.filePath+t.imageFile.fileName,n={payment_file:e,Id:t.id};t.flag=!1,(0,r.djRequest)({url:"/api/order/uniapp_payment",data:n,method:"POST",success:function(e){t.flag=!0,t.showOrHide=!t.showOrHide,t.sucs=!1,t.proof=!0,t.inputShow=!0,200===e.data.status?(i.default.TostUtil(e.data.message),t.getList("pay"),t.info("match"),t.info("pay"),t.info("confirm"),t.info("evaluate")):i.default.TostUtil(e.data.message)},fail:function(t){i.default.TostUtil(t.data.message)}})}},info:function(t){var e=this;(0,r.djRequest)({url:"/api/order",method:"POST",data:{start:0,length:50,status:t,type:"buy"},success:function(n){var i=n.data.data.data,a=[];e.items.forEach(function(e,n){t===e.type&&(i.forEach(function(t){"buy"===t.type&&a.push(t)}),e.num=a.length)})}})},connect:function(e,n){t.navigateTo({url:"connectMember?dist="+n+"&id="+e.id+"&personId="+e.sellerMemberId+"&type="+e.type})},onClickItem:function(t){var e=this,n=["match","pay","confirm","evaluate"];this.current!==t&&(this.current=t,e.list=[],e.getList(n[t]),this.info("match"),this.info("pay"),this.info("confirm"),this.info("evaluate"))},getList:function(t){var e=this;(0,r.djRequest)({url:"/api/order",method:"POST",data:{start:0,length:50,status:t,type:"buy"},success:function(n){if(e.list=[],200===n.data.status&&n.data.data.data.length>0)for(var i=n.data.data.data,a=864e5,r=0;r<i.length;r++){var o=i[r],u=void 0;if("match"===t?u=1e3*Number(o.time):"pay"===t?u=1e3*Number(o.matchTime):"confirm"===t?u=1e3*Number(o.payTime):"evaluate"===t&&(u=1e3*Number(o.confirmTime)),!o.hasOwnProperty("rever")){var s=(Date.now()-u)%a,f=a-s;o.rever=f}e.list=[],e.list=i,e.getData(t)}}})},getData:function(t){var e=this,n=e.list;n.forEach(function(t){null!=e.orderTimer&&clearInterval(e.orderTimer),e.orderTimer=setInterval(function(){t.rever-=1e3,t.rever<=0&&(t.rever=864e5)},1e3)}),e.list=n}}};e.default=f}).call(this,n("6e42")["default"])},"5f62":function(t,e,n){"use strict";var i=n("8add"),a=n.n(i);a.a},"6bfb":function(t,e,n){"use strict";var i=n("6f36"),a=n.n(i);a.a},"6f36":function(t,e,n){},"7e36":function(t,e,n){"use strict";n.r(e);var i=n("28b6"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=a.a},"857b":function(t,e,n){"use strict";n.r(e);var i=n("0691"),a=n("9c2b");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("6bfb");var o=n("2877"),u=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports},"8add":function(t,e,n){},"927b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-icon",props:{type:String,color:String,size:[Number,String]},computed:{fontSize:function(){return"".concat(this.size,"px")}},methods:{onClick:function(){this.$emit("click")}}};e.default=i},9301:function(t,e,n){"use strict";n.r(e);var i=n("a9b0"),a=n("7e36");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("5f62");var o=n("2877"),u=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports},"9c2b":function(t,e,n){"use strict";n.r(e);var i=n("927b"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=a.a},a9b0:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.list,function(e,n){var i=t._f("formatDate")(e.time,1),a=t._f("formatDate")(e.matchTime,1),r=t._f("formatDate")(e.payTime,1),o=t._f("formatDate")(e.confirmTime,1),u=t._f("formatLeftDate")(e.rever),s=t._f("yuan")(2e3*e.number);return{$orig:t.__get_orig(e),f0:i,f1:a,f2:r,f3:o,f4:u,f5:s}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})}},[["3319","common/runtime","common/vendor"]]]);