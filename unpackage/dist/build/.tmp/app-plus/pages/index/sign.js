(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/sign"],{"0616":function(t,n,e){"use strict";e.r(n);var a=e("8b3c"),i=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(n,t,function(){return a[t]})}(s);n["default"]=i.a},"1de4":function(t,n,e){"use strict";var a=e("cfc3"),i=e.n(a);i.a},"8b3c":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("1bfa"),i=u(e("ab50")),s=e("5cc9");function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){return e.e("components/uni-icon/uni-icon").then(e.bind(null,"857b"))},c={data:function(){return{signTxt:"签到领积分",signNum:0,list:[],dateList:[],know:!1,signList:[]}},onNavigationBarButtonTap:function(n){t.navigateTo({url:"signRecord"})},onShow:function(){i.default.balance(),this.signNum=s.config.balance.sign;var t=this;(0,a.djRequest)({url:"/api/sign/sign_list",method:"POST",data:{start:0,length:50},success:function(n){if(0==n.data.data.data.length)t.signTxt="签到领积分";else{var e=n.data.data.data[0].time,a=new Date(1e3*e),i=(a.getFullYear(),a.getDate());i=i<10?"0"+i:i;var s=new Date,u=s.getDate();u=u<10?"0"+u:u,t.signTxt=i!==u?"签到领积分":"今日已签到"}}})},components:{uniIcon:o},onLoad:function(){var t=this;t.getDate(),t.signNum=s.config.balance.sign},methods:{getKnow:function(){this.know=!0},inKnow:function(){this.know=!this.know},navTo:function(n){t.navigateTo({url:n.currentTarget.dataset.url})},getDate:function(){for(var t=this,n=new Date,e=n.getTime(),i=n.getDay(),s=[],u=0;u<7;u++){var o={};o.time=new Date(e+864e5*(u-(i+6)%7)).toLocaleDateString().replace(/\//g,".").slice(5),s.push({time:o.time,isSign:!1})}t.dateList=s,(0,a.djRequest)({url:"/api/sign/sign_list",method:"POST",data:{start:0,length:7},success:function(n){var e=n.data.data.data;e.length;for(u=0;u<e.length;u++){var a=new Date(1e3*Number(e[u].time)),i=(a.getFullYear(),a.getMonth()+1),s=a.getDate(),o=i+"."+s;t.signList.push(o)}for(var c=0;c<t.dateList.length;c++)for(var r=0;r<t.signList.length;r++)t.signList[r]==t.dateList[c].time&&(t.dateList[c].isSign=!0)}})},sign:function(){if("今日已签到"!=this.signTxt){var t=this;(0,a.djRequest)({url:"/api/sign",data:{},success:function(n){200==n.data.status?(i.default.TostUtil(n.data.message),t.getDate(),t.signTxt="今日已签到",function(){(0,a.djRequest)({url:"/api/member/balance",method:"GET",success:function(n){200===n.data.status&&(s.config.balance=n.data.data,t.signNum=s.config.balance.sign)}})}()):i.default.TostUtil(n.data.message)}})}},switch1Change:function(t){console.log("switch1 发生 change 事件，携带值为",t.target.value," at pages\\index\\sign.vue:205")}}};n.default=c}).call(this,e("6e42")["default"])},"98fc":function(t,n,e){"use strict";e.r(n);var a=e("c315"),i=e("0616");for(var s in i)"default"!==s&&function(t){e.d(n,t,function(){return i[t]})}(s);e("1de4");var u=e("2877"),o=Object(u["a"])(i["default"],a["a"],a["b"],!1,null,null,null);n["default"]=o.exports},c315:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"a",function(){return a}),e.d(n,"b",function(){return i})},cfc3:function(t,n,e){}},[["a988","common/runtime","common/vendor"]]]);